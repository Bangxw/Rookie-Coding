<!DOCTYPE html>

<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatibal" content="ie=edge">
    <title>03.走马灯效果</title>
  </head>

  <body>
    <div id="app">
      <button @click="toggleRun">Toggle Run</button><br><br>
      <span>{{message}}</span>
    </div>

    <script src="../../lib/vue.js"></script>
    <script>
      let timer = null,
        tips = false
      new Vue({
        el: '#app',
        data: {
          message: 'ABCDEFGHIJKLMNOPARSTUVWXYZ!',
        },
        methods: {
          toggleRun() {
            tips = !tips
            if (tips) {
              timer = setInterval(() => { //箭头函数解决内部this的指向问题
                this.message += this.message.substr(0, 1)
                this.message = this.message.substr(-(this.message.length - 1))
              }, 1000)
            } else {
              clearInterval(timer)
              timer = null
            }
          }
        }
      })
    </script>
  </body>

</html>