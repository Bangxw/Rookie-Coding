<!DOCTYPE html>

<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatibal" content="ie=edge">
    <title>生命周期函数</title>
    <style>
      [v-cloak] {
        display: none
      }
    </style>
  </head>

  <body>
    <div id="app" v-cloak>
      <h1>{{ message }}</h1>
      <button @click="updateMsg">update</button>
    </div>

    <script src="../../lib/vue.js"></script>
    <script>
      new Vue({
        el: '#app',
        data: {
          message: 'Hello World!',
        },
        methods: {
          show() {
            console.log(this.message)
          },
          updateMsg() {
            this.message = 'update msg!'
          }
        },
        beforeCreate() { //第一个钩子函数，表示实例完全被创建出来之前会执行它
          console.log(this.message) //undefined
            //this.show() //"TypeError: this.show is not a function"
            /* 注意：在beforeCreate生命周期函数执行时，data和methods的数据还没初始化好 */
        },
        created() {
          console.log(this.message) //undefined
          this.show() //"TypeError: this.show is not a function"
            /* 注意：在beforeCreate生命周期函数执行时，data和methods的数据还没初始化好, 此时还没创建el */
        },
        beforeMount() { //模板已经在内存中成功编译，尚未在页面挂载
          console.log(document.getElementsByTagName('h1')[0].innerText) //{{ message }}
        },
        mounted() { //内存中的模板已经挂载到页面中，用户可以看到渲染好的页面了
          console.log(document.getElementsByTagName('h1')[0].innerText) //Hello World!
            /* mounted是实例创建期间最后一个生命周期函数，接下来就进行到运行阶段 */
            /* 如果要通过插件操作页面上的dom节点，最早只能在此进行 */
        },
        beforeUpdate() { //当数据更新时会触发该事件，此时的界面还没有更新
          console.log('interface h3 content: ' + document.getElementsByTagName('h1')[0].innerText) //interface h3 content: Hello World!
          console.log('data中的数据: ' + this.message) //data中的数据: update msg!
        },
        updated() { //完成了从model层重新渲染到view层，页面和data数据保持同步了

        },
        beforeDestroy() { //此时实例的data和methods都处于可用状态，还没有真正销毁 
          /* 当执行beforeDestroyed钩子函数时，vue实例从运行阶段进入到销毁阶段 */
        },
        destroyed() { //执行到destroyed函数的时候，组建已经被完全销毁，data和methods都不可用了
        
        }
      })
    </script>
  </body>

</html>