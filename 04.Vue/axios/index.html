<!DOCTYPE html>

<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatibal" content="ie=edge">
    <title>Hello World!</title>
    <style>
      [v-cloak] {
        display: none
      }
    </style>
  </head>

  <body>
    <div id="app" v-cloak>
      <h1>{{ message }}</h1>
      <button @click="getInfo">Axios Get</button>
      <button @click="postInfo">Axios Post</button>
      <button @click="axiosApi">Axios Api</button>
    </div>

    <script src="./lib/vue.js"></script>
    <script src="./lib/axios.min.js"></script>
    <script>
      const params = new URLSearchParams();
      params.append('data', 'Hello World!');
      params.append('param2', 'value2');

      axios.defaults.baseURL = '127.0.0.1:3000';
      axios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded'

      new Vue({
        el: '#app',
        data: {
          message: 'Hello World!',
        },
        methods: {
          getInfo() {
            axios.get('http://127.0.0.1:3000')
              .then(response => {
                console.log(response)
              }).catch(error => {
                console.log(error)
              })
          },
          postInfo() {
            axios.post('http://127.0.0.1:3000', params) //发送post的时候，很多服务器要求以application / x-www-form-urlencoded格式发送数据
              .then(response => {
                console.log(response)
              }).catch(error => {
                console.log(error)
              })
          },
          axiosApi() {
            axios({
                methods: 'Get', // Get
                url: '127.0.0.1:3000/api/getproductlist',
                headers: {
                  // 'X-Requested-With': 'XMLHttpRequest'
                },
                params: { //`params` 是即将与请求一起发送的 URL 参数
                  ID: 12345
                },
                data: { //data` 是作为请求主体被发送的数据 只适用于这些请求方法 'PUT', 'POST', 和 'PATCH'
                  firstName: 'Fred'
                },
                timeout: 1000, // `timeout` 指定请求超时的毫秒数(0 表示无超时时间)
                responseType: 'json', // default
              })
              .then(function(response) {
                console.log(response.data) 
                console.log(response.status); //来自服务器响应的 HTTP 状态码
                console.log(response.statusText); //来自服务器响应的 HTTP 状态信息
                console.log(response.headers); //服务器响应的头
                console.log(response.config); //是为请求提供的配置信息
              });
          }
        }
      })
    </script>
  </body>

</html>