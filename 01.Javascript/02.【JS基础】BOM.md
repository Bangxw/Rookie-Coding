# 【Javascript基础】-BOM

> BOM: Brower Object Model(浏览器对象模型), 也可以叫Web API

- [Javascript BOM操作](#Javascript基础)
  - [window对象](#window对象)
  - [screen对象](#screen对象)
  - [location对象](#location对象)
  - [history对象](#history对象)
  - [nagigator对象](#nagigator对象)

## window对象

| 方法 | 描述 |
| - | :- |
| `window.alert()` |  |
| `window.atob()` | 解码base-64字符串 |
| `window.blur()` |  |
| `window.btoa()` | 编码为base-64 |
| `window.clearInterval()` |  |
| `window.clearTimeout()` | |
| `window.close()` | |
| `window.confirm()` | |
| `window.focus()` | |
| `window.getComputedStyle(element, null)` | 得到元素的样式集合 |
| `window.getSelection()` | `window.getSelection().toString()`返回光标选择的文本 |
| `window.matchMedia()` | `window.matchMedia("(min-width:800px)").matches` |
| `window.minimize()` | 主流浏览器基本都不支持 |
| `window.moveBy()` | 限定: ①.只能移动由`open`创建的窗口 ②.窗口有多个选项卡，无法移动 |
| `window.moveTo()` | 限定条件同`moveBy` |
| `window.open()` | |
| `window.postMessage()` | 实现跨源通信,open的window窗口，iframe的窗口之间通信，接收方使用`window.addEventListener("message", receiveMessage, false)`侦听, [实例](https://juejin.im/post/5e146bae6fb9a048401d077d) |
| `window.print()` | 调出打印对话框打印当前文档 |
| `window.prompt()` | |
| `window.resizeBy()` | 出于安全原因，如果窗口不是由window.open创建的或包含多个选项卡，无法使用。此外，默认情况下也无法调整大小，要有`resizable`属性 |
| `window.resizeTo()` | |
| `window.restore()` | 浏览器都不支持 |
| `window.scroll(x-coord，y-coord)` | IE、Edge不支持 |
| `window.scrollBy()` | 相对移动，IE不支持 |
| `window.scrollTo()` | 移动到指定位置 |
| `window.setInterval()` | |
| `window.setTimeout()` | |
| `window.stop()` | `stop()`等效于“停止”按钮。由于脚本的加载顺序，stop()方法不能停止包含它的文档的加载，但是它将停止加载大型图像、新窗口和其他延迟加载的对象。 |

## screen对象

| 属性 | 说明 | IE | Firefox | Safari/Chrome | Opera |
| :- | :- | :-| :-: | :-: | :-: |
| `screen.availHeight` | 屏幕的像素高度 - 浏览器的部件高度(只读) | √ | √ | √ | √ |
| `screen.availLeft` | 未被系统部件占用的最左侧的像素值(只读) |  | √ | √ | |
| `screen.availTop` | 未被系统部件占用的最上方的像素值(只读) |  | √ | √ | |
| `screen.availWidth` | 屏幕的像素宽度 - 浏览器的部件宽度(只读) | √ | √ | √ | √ |
| `screen.bufferDepth` | 呈现屏外位图的位数(读写) | √ | | |
| `screen.colorDepth` | 用于表现颜色的位数，多数系统是32(只读) | √ | √ | √ | √ |
| `screen.deviceXDPI` | 屏幕实际的水平DPI(每英寸的像素点数)(只读) | √ | | |
| `screen.deviceYDPI` | 屏幕实际的垂直DPI(只读) | √ | | |
| `screen.fontSmoothingEnabled` | 是否启用了字体平滑(只读) | √ | | |
| `screen.height` | 屏幕的像素高度 | √ | √ | √ | √ |
| `screen.left` | 当前屏幕距左边的像素距离 | | √ | |
| `screen.logicalXDPI` | 屏幕逻辑的水平DPI(只读) | √ | | |
| `screen.logicalYDPI` | 屏幕逻辑的垂直DPI(只读) | √ | | |
| `screen.pixelDepth` | 屏幕的位深(只读) | | √ | √ | √ |
| `screen.top` | 当前屏幕距上边的像素距离 | | √ | |
| `screen.updateInterval` | 以毫秒表示的屏幕刷新时间间隔(读、写) | √ | | |
| `screen.width` | 屏幕的像素宽度 | √(IE11×) | | |

- `screen.deviceXDPI / screen.logicalXDPI = 缩放(高分屏)`
- `screen.width * 缩放 = 屏幕分辨率(宽)`

## location对象

| 属性名 | 例子 | 说明 |
| :- | | |
| `location.hash` | "#/configure/net/wan" | 返回URL的hash(#后的字符)，若URL中不包含散列，则返回空字符串 |
| `location.host` | "www.wrox.com:80" | 返回服务器的名称和端口号 |
| `location.hostname` | "www.wrox.com" | 返回不带端口号的服务器名称 |
| `location.href` | "http://www.wrox.com" | 返回当前加载页面的完整URL。`location`的同`toString()`方法也返回这个值 |
| `location.pathname` | "/" | 返回URL中的目录或文件名 |
| `location.port` | "8080" | 返回URL中指定的端口号。如果URL中不包含端口号，则这个属性返回空字符串 |
| `location.protocol` | "http:" | 返回页面的使用协议(http: || https:) |
| `location.search` | "?q=javascript" | 返回URL的查询字符串。这个字符串以问号开头 |

```js
// 重定向 location.href和window.location也是调用assign方法
location.assign("http://www.wrox.com")
location.replace("http://www.wrox.com") // 不会保留历史记录
locaiton.reload(true)
location.href = "http://www.wrox.com"
window.location = "http://www.wrox.com"

// 以下方式，也会重新加载URL(除hash)
location.hash = "#section1"
location.search = '?q=javascript'
location.hostname = 'www.yahoo.com'
location.pathname = 'mydir'
location.port = 8080

// 查询字符串参数
function getQueryStringArgs() {
  var qs = (location.search.length > 0 ? location.search.substring(1) : ""),
  items = qs.length ? qs.split('&') : [],
  args = {}, item = null, name = null, value = null;

  for(var i = 0; i < items.length; i++) {
    item = items[i].split('=')
    name = decodeURIComponent(item[0])
    value = decodeURIComponent(item[1])
    if(name.length)  args[name] = value
  }
  return args
}
```

## history对象

```js
history.length
history.go(-1) // 后退一页
history.go(2) // 前进两页
history.go("wrox.com") // 跳转到最近的wrox.com页面
history.back() // 后退一页
history.forward() //前进一页
```

## nagigator对象

| 属性/方法 | 说明 | IE | Firefox | Safari/Chrome | Opera |
| :- | :-  | :-  | :-: | :-: | :-: |
| `appCodeName` | 浏览器名称，通常都是Mozilla,即使非Mozilla | 3.0+ | 1.0+ | 1.0+ | 7.0+ |
| `appMinorVersion` | 次版本信息 | 4.0+ | - | - | 9.5+ |
| `appName` | 完整的浏览器名称 | 3.0+ | 1.0+ | 1.0+ | 7.0+ |
| `appVersion` | 浏览器版本，一般不与实际的浏览器版本对应 | 3.0+ | 1.0+ | 1.0+ | 7.0+ |
| `buildID` | 浏览器编译版本 | - | 2.0+ | - | - |
| `cookieEnabled` | 表示cookie是否启用 | 4.0+ | 1.0+ | 1.0+ | 7.0+ |
| `cpuClass` | 客户端计算机使用的CPU类型（x86、68k、alpha、ppc或other） | 4.0+ | - | - | - |
| `javaEnabled()` | 表示当前浏览器是否启用了Java | 4.0+ | 1.0+ | 1.0+ | 7.0+ |
| `language` | 浏览器的主语言 | - | 1.0+ | 1.0+ | 7.0+ |
| `mimeTypes`| 在浏览器中注册的MIME类型数组 | 4.0+ | 1.0+ | 1.0+ | 7.0+ |
| `online`| 表示浏览器是否连接到了因特网 | 4.0+ | 1.0+ | - | 9.5+ |
| `opsProfile`| 似乎早就不用了。查不到相关文档 | 4.0+ | - | - | - |
| `oscpu`| 客户端计算机的操作系统或使用的cpu | 4.0+ | - | - | - |
| `platform`| 浏览器所在的系统平台 | 4.0+ | 1.0+ | 1.0+ | 7.0+ |
| `plugins`| 浏览器中安装的插件信息的数组 | 4.0+ | 1.0+ | 1.0+ | 7.0+ |
| `preference()`| 设置用户的首选项 | - | 1.5+ | - | - |
| `product`| 产品名称（如Gecko） | - | 1.0+ | 1.0+ | - |
| `productSub`| 产品的次要信息（如Gecko的版本） | - | 1.0+ | 1.0+ | - |
| `registerContentHandler()`| 针对特定的MIME类型将一个站点注册为处理程序 | - | 2.0+ | - | - |
| `registerProtocolHandler()`| 针对特定的协议将一个站点注册为处理程序 | - | 2.0+ | - | - |
| ~~`securityPolicy`~~ | ~~已废弃。安全策略的名称。为了与Netscape Navigator 4向后兼容而保留下来~~ | - | 2.0+ | - | - |
| `systemLanguage`| 操作系统的语言 | 4.0+ | - | - | - |
| ~~`tainEnabled()`~~ | ~~已废弃。表示是否允许变量被修改(taint)。为了与Netscape Navigator 3向后兼容而保留~~ | 4.0+ | 1.0+ | | 7.0+ |
| `userAgent` | 浏览器的用户代理字符串 | 3.0+ | 1.0+ | 1.0+ | 7.0+ |
| `userLanguage` | 操作系统的默认语言 | 4.0+ | - | - | 7.0+ |
| `userProfile` | 借以访问的用户个人信息的对象 | 4.0+ | - | - | - |
| `vendor` | 浏览器的品牌 | - | 1.0+ | 1.0+ | - |
| `vendorSub` | 有关供应商的次要信息 | - | 1.0+ | 1.0+ | - |

```js
// 检测插件
function hasPlugin(name) {
  name = name.toLowerCase()
  for (var i = 0; i < navigator.plugins.length; i++) {
    if(navigator.plugins[i].name.toLowerCase().indexOf(name) > -1) return true
  }
  return false
}
alert(hasPlugin('Flash'))
alert(hasPlugin('QuickTime'))

function hasIEPlugin(name) {
  try {
    new ActiveXObject(name)
    return true
  } catch(e) {
    return false
  }
}
alert(hasIEPlugin('ShockwaveFlash.ShockwaveFlash'))
alert(hasIEPlugin('QuickTime.QuickTime'))
```
