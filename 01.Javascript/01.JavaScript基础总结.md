# Javascript 基础总结

## 目录

- [Javascript数据类型](#Javascript数据类型)
- [Javascript Dom操作](#Dom操作)
- [HTML Element](#HTML-Element)

> JAVASCRIPT是基于对象和事件驱动的客户端脚本语言，弱类型语言，具有交互性、安全性、跨平台性三大特点。包含三个部分: _DOM、BOM、ECMASCRIPT_

- **DOM**：当一个页面加载时，浏览器会把html文档呈现为具有元素、属性、属性值、文本的节点树, DOM提供了API并规范我们操作这些节点。
- **BOM**：提供了独立于内容而与浏览器进行窗口进行交互的对象，可以对浏览器窗口进行交互和操作。核心对象window, window又包含子对象: `frames、history、location、navigator、screen`
- **ECMASCRIPT**：ECMA规范定义了js作为一门编程语言的标准，包含变量基本类型、对象、函数、作用域、运算符、流程控制语句等

## Javascript数据类型

1. 基本类型：`number、string、boolean`
2. 复合类型：`Array、Date、Number、String、Boolean、Math、Regexp` 还有两个核心类型 `Object，Function`
3. 5种基本数据类型：`undefined、null、string、object、boolean`
    - *undefined*
      - 使用var声明变量
      - 区分空对象指针与尚未定义的变量
      - 对未初始化的变量及未声明的变量使用typeof运算符均会返回undefined
    - *null*
      - 逻辑上null表示一个空对象的指针
      - 使用typeof检测时会返回object
    - *undefined与null的关系*
      - undefined派生于null,因此使用'=='比较时，会返回true
      - 没有必要将变量值显示声明为undefined
      - 声明空对象时应将其赋值为null
    - *boolean*
      - 两个值：true和false, 使用Boolean()进行转换，[空字符串、0、null、undefined、NaN]转化为false
    - *String*
      - 使用.length属性访问字符串长度，转义序列表示一个字符，无法精确返回双字节字符长度

**转义序列**:

- "\n"：换行
- "\t"：制表符
- "\b"：空格
- "\r"：回车符
- "\f"：分页符

**类型转换**: `toString()、String()、eval()`

**数值转换**: `Number()、parseInt()、parseFloat()`

**数值范围**:

- 最小值: Number.Min_VALUE [1.7976931348623157e+308]
- 最大值: Number.MAX_VALUE [5e-324]
- 正无穷: Infinity
- 负无穷: -Infinity
- 检测办法: isFinite()

## Dom操作

### 获取节点

> 通过元素的id属性、name属性、标签名获取节点
> 除getElementById之外，其他获取的都是节点集合

- document.getElementById("id");
- document.getElementsByTagName("p");
- document.getElementsByName("name");
- document.getElementsByClassName("container-div");

### 节点指针

>注意：节点操作时候html结构中的各种空格，换行符都可能会把文本节点当做同胞元素处理。如firstChild查询的第一个节点为空文本节点, firstElementChild才是你需要的元素节点

- parentObj.firstchild（IE6、7、8获取第一个元素节点，非IE6、7、8获取第一个节点）
- parentObj.firstElementChild（IE6、7、8不支持）
- parentObj.lastchild
- parentObj.lastElementChild
- parentObj.childNodes（IE只获取元素节点，非IE获取元素节点与文本节点）
- parentObj.children
- neborNode.previousSibling
- neborNode.nextSibling
- childNode.parentNode

### 节点操作

1. 创建节点:
    - document.createElement("元素标签");
    - document.createAttribute("元素属性");
    - document.createTextNode("文本内容");
2. 插入节点
    - document.insertBefore(newCode,referenceChild);
    - parentNode.appendChild(newNode);
    - element.insertAdjacentHTML(position, text); position: beforebegin | afterbegin | beforeend | afterend
3. 替换节点
    - replaceChild
4. 复制节点
    - cloneNode(true/false)
5. 删除节点
    - parentNode.removeChild(node)

### 属性操作

1. 获取属性：getAttribute(name)
2. 设置属性：setAttribute(name,value)
3. 删除属性：removeAttribute(name)

#### 特殊属性class操作

1. element.className: 字符串操作 全兼容
2. element.classlist：IE10+
    - add()
    - remove()
    - item()
    - toggle()
    - contains()
    - replace()

### 文本操作

1. 插入文本：insertData(offset,string) -> 从offset指定的位置插入string
2. 追加文本：appendData(string) -> 将string插入到文本节点的末尾处
3. 删除文本：deleteData(offset,count) -> 从offset起删除count个字符
4. 替代文本：replaceData(offset,count,string) -> 从offset起将count个字符替换为string
5. 分离文本：splitData(offset) -> 从offset起将文本节点分为两个节点
6. 返回节点：substringData(offset,count) -> 返回由offset起的count个字符

## HTML-Element

### 元素视图属性

![box](lib/box.png)

```css
div {
  width: 200px;
  height: 200px;
  padding: 10px;
  border: 5px solid lightgreen;
  margin: 20px;
  background: lightskyblue;
}
```

- *client*:
  - clientWidth (width + 左右padding) = 220
  - clientHeight (height + 上下padding) = 220
  - clientTop (border.top) = 5
  - clientLeft (botder.left) = 5
- *offset*：
  - offsetWidth (width + 左右padding + 左右border) = 230
  - offsetHeight (width + 上下padding + 上下border) = 230
  - offsetLeft (到offsetParent的内边距) = 20
  - offsetTop (到offsetParent的内边距) = 20
- *scroll*：
  - scrollWidth：真实宽度（可视区域宽度+被隐藏区域宽度）= 220
  - scrollHeight：真实高度（可视区域高度+被隐藏区域高度）= 220
  - scrollTop：内容层顶部 到 可视区域顶部的距离 = 0
  - scrollLeft：内容层左端 到 可视区域左端的距离 = 0
- *getBoundingClientRect()*:
  - bottom: 元素底边（包括border）到可视区最顶部的距离
  - left: 元素最左边（不包括border）到可视区最左边的距离
  - right: 元素最右边（包括border）到可视区最左边的距离
  - top: 元素顶边（不包括border）到可视区最顶部的距离
  - height: 元素的offsetHeight
  - width: 元素的offsetWidth
  - x: 元素左上角的x坐标
  - y: 元素左上角的y坐标
- *scrollIntoView()*：滚动到可视区域
- *window.getComputedStyle(ele).getPropertyValue("transform")*：得到实际的transform值, martix()

### Window视图属性

> 浏览器窗口可视区宽度（*不包括浏览器控制台、菜单栏、工具栏*）（<IE9不支持）

- innerWidth
- innerHeight

### Document文档视图

> 低版本IE的innerWidth、innerHeight的代替方案
> 浏览器窗口可视区宽度（*不包括浏览器控制台、菜单栏、工具栏、滚动条*）

- *client*:
  - document.documentElement.clientWidth
  - document.documentElement.clientHeight
- *ffset*:
  - document.documentElement.offsetHeight：整个文档高度
  - document.body.offsetHeight：整个文档高度（不包含body的margin）
- *scroll*:
  - document.documentElement.scrollTop: 返回文档的滚动top方向的距离（当窗口发生滚动时值改变）
  - document.documentElement.scrollLeft

## Js遍历

```js
for(var i = 0; i < arr.length; i++) { }

for(var i of arr) { }

for(var i in arr) { }

arr.forEach((item, index, arr) => { })

arr.map((value,index,array) => { })
```